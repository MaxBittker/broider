function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},l=n.parcelRequireed3d;null==l&&((l=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},n.parcelRequireed3d=l),l.register("27Lyk",(function(t,n){var o,r;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var l={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)l[t[n]]=e[t[n]]},r=function(e){var t=l[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),l("27Lyk").register(JSON.parse('{"6evGa":"index.1612d418.js","55edQ":"1.4174c112.png","99rIB":"2.672c92e3.png","aLMx8":"4.1e9ab26e.png"}'));var i;i=new URL(l("27Lyk").resolve("55edQ"),import.meta.url).toString();var a;a=new URL(l("27Lyk").resolve("99rIB"),import.meta.url).toString();var d;d=new URL(l("27Lyk").resolve("aLMx8"),import.meta.url).toString();var c,s;s=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}};var u={"text/plain":"Text","text/html":"Url",default:"Text"};c=function(e,t){var n,o,r,l,i,a,d=!1;t||(t={}),n=t.debug||!1;try{if(r=s(),l=document.createRange(),i=document.getSelection(),(a=document.createElement("span")).textContent=e,a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",(function(o){if(o.stopPropagation(),t.format)if(o.preventDefault(),void 0===o.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=u[t.format]||u.default;window.clipboardData.setData(r,e)}else o.clipboardData.clearData(),o.clipboardData.setData(t.format,e);t.onCopy&&(o.preventDefault(),t.onCopy(o.clipboardData))})),document.body.appendChild(a),l.selectNodeContents(a),i.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(l):i.removeAllRanges()),a&&document.body.removeChild(a),r()}return d};var f=16;function g([e,t],n=1){return[[e,t],[20-t,e],[20-e,20-t],[t,20-e]]}function m(e,t){let n=t.reduce(((e,t)=>e[t]),e);return"number"!=typeof n?0:n}let p=document.getElementById("target"),h=document.getElementById("vector-target"),v=document.getElementById("editor"),y=document.getElementById("guide"),w=document.getElementById("render");var E=v.getContext("2d"),b=y.getContext("2d"),L=w.getContext("2d");function x(){E.clearRect(0,0,v.width,v.height)}function C(e,t){L.fill();for(let n=0;n<3;n++)for(let o=0;o<3;o++)for(let r=0;r<7;r++)for(let l=0;l<7;l++){let i=m(e,[n,o,r,l]);E.fillStyle=1==i?window.paintColor:"#fff0",L.fillStyle=1==i?window.paintColor:"#fff0";let a=(7*n+r)*t,d=(7*o+l)*t;1==n&&1==o||(L.clearRect(a,d,t,t),L.fillRect(a,d,t,t),a*=f/t,d*=f/t,E.fillRect(a+1,d+1,15,15))}k(e,t)}function R(e,t){let n=w.toDataURL(),o=k(e,t);console.log(o.length),console.log(n.length);let r=document.getElementById("border-style");r&&r.remove(),r=document.createElement("style"),r.id="border-style",document.head.appendChild(r);let l=7*t,i=`.broider {\n    border-image:  url("${o}") ${l} /  ${l}px / 0 round;\n    border-width:  ${l}px;\n    border-style:  solid;\n}`;r.sheet.insertRule(i),p.textContent=i}function k(e,t){let n=`<svg \n      width="${7*t*3}px"\n      height="${7*t*3}px"\n      viewBox="0 0 ${7*t*3} ${7*t*3}" \n      fill="red"\n      stroke="none"\n      xmlns="http://www.w3.org/2000/svg"\n      >`;for(let o=0;o<3;o++)for(let r=0;r<3;r++)for(let l=0;l<7;l++)for(let i=0;i<7;i++){let a=m(e,[o,r,l,i]);1==o&&1==r||1==a&&(n+=`<rect x="${(7*o+l)*t}" y="${(7*r+i)*t}" width="${t}px" height="${t}px"/>`)}return n+="</svg>",h.innerHTML=n,"data:image/svg+xml,"+encodeURIComponent(n).replace(/'/g,"%27").replace(/"/g,"%22")}function S(e,t){let n=7*t[0]+t[2],o=7*t[1]+t[3];E.fillStyle=(m(e,t),"#dde"),1==t[0]&&1==t[1]||E.fillRect(n*f+0,o*f+0,16,16)}function T(){p.setAttribute("data-after","[Click to copy]")}L.imageSmoothingEnabled=!1,p.addEventListener("click",(function(){t(c)(p.textContent,{message:"Press #{key} to copy css"}),p.setAttribute("data-after","Copied to your clipboard!"),p.classList.remove("flash"),window.setTimeout((()=>{p.classList.add("flash")}),1),window.setTimeout(T,2500)})),T();let D=document.getElementById("pen"),I=document.getElementById("eraser"),B=document.getElementById("symmetry"),A=document.getElementById("undo"),U=document.getElementById("scale"),$=document.getElementById("color"),_=document.getElementById("editor-frame"),M=document.getElementById("editor"),O=document.getElementById("guide"),P=document.getElementById("render");M.width=336,M.height=336,O.width=336,O.height=336;let H=2,N=[1,2,4],X=[t(i),t(a),t(d)],F=N[H];function Y(){_.style.height=M.getBoundingClientRect().width+"px"}P.width=7*F*3,P.height=7*F*3,U.addEventListener("click",(()=>{H=(H+1)%N.length,U.src=X[H],F=N[H],P.width=7*F*3,P.height=7*F*3,C(z,F),R(z,F),Y()})),window.paintColor="#000",$.addEventListener("input",(e=>{window.paintColor=e.target.value,C(z,F),R(F)})),document.addEventListener("DOMContentLoaded",Y),window.addEventListener("resize",Y);var J=!1,j=!1,q=!0;B.addEventListener("click",(e=>{q=!q,B.classList.toggle("selected")})),I.addEventListener("click",(e=>{j=!0,I.classList.add("selected"),D.classList.remove("selected")})),D.addEventListener("click",(e=>{j=!1,D.classList.add("selected"),I.classList.remove("selected")}));var z=new Array(3).fill(0).map(((e,t)=>new Array(3).fill(0).map(((e,t)=>new Array(7).fill(0).map(((e,t)=>new Array(7).fill(0)))))));let Q=[JSON.stringify(z)];function G(){let e=JSON.stringify(z);e!=Q[Q.length-1]&&(Q.push(e),Q.length>50&&Q.shift(),A.classList.add("selected"))}A.addEventListener("click",(e=>{!function(){Q.pop();let e=Q[Q.length-1];e&&(z=JSON.parse(e),x(),C(z,F),R(z,F))}(),Q.length<2&&A.classList.remove("selected"),e.preventDefault()})),function(){for(let e=1;e<3;e++){b.strokeStyle="#33f",b.lineWidth=.5;let t=e*v.width/3;b.beginPath(),b.moveTo(t,0),b.lineTo(t,v.height),b.stroke(),b.beginPath(),b.moveTo(0,t),b.lineTo(v.height,t),b.stroke()}for(let e=0;e<21;e++){b.strokeStyle="#ccc";let t=e*v.width/21;b.beginPath(),b.moveTo(t,0),b.lineTo(t,v.height),b.stroke(),b.beginPath(),b.moveTo(0,t),b.lineTo(v.height,t),b.stroke()}let e=v.width/3;b.clearRect(e+1,e+1,e-2,e-2),b.beginPath(),b.moveTo(1*e,2*e),b.lineTo(2*e,1*e),b.stroke(),b.beginPath(),b.moveTo(1*e,1*e),b.lineTo(2*e,2*e),b.stroke()}(),C(z,F),R(z,F);let W=(e,t=!1,n=!1)=>{let{left:o,top:r,width:l,height:i}=M.getBoundingClientRect(),a=e.clientX-o,d=e.clientY-r,c=a/l*M.width,s=d/i*M.height,u=Math.floor(c/f),p=Math.floor(s/f),h=q?g([u,p]):[[u,p]];x(),h.forEach((([e,o])=>{let r=Math.floor(e/7),l=Math.floor(o/7),i=[r,l,e%7,o%7];if(r<0||r>2||l<0||l>2)return;n&&S(z,i);let a=m(z,i);t||(a=0),j&&(a=1),function(e,t){J&&function(e,t,n=1){let o=t.slice(0,-1),r=t[t.length-1];o.reduce(((e,t)=>e[t]),e)[r]=n}(z,e,1-t)}(i,a)})),C(z,F),window.setTimeout((()=>R(z,F)),0)};M.addEventListener("mousedown",(e=>{J=!0,W(e,!0)})),M.addEventListener("mousemove",(e=>{W(e,!1,!0)})),M.addEventListener("mouseout",(e=>{x(),C(z,F)})),window.addEventListener("mousedown",(()=>{J=!0})),window.addEventListener("mouseup",(()=>{J=!1,G()})),M.addEventListener("touchend",(e=>{J=!1,G()})),M.addEventListener("touchstart",(e=>{J=!0,e.preventDefault();const t=e.targetTouches;for(let n=0;n<t.length;n++)e.clientX=t[n].clientX,e.clientY=t[n].clientY,W(e)})),M.addEventListener("touchmove",(e=>{e.preventDefault(),J=!0;const t=e.targetTouches;for(let n=0;n<t.length;n++)e.clientX=t[n].clientX,e.clientY=t[n].clientY,W(e)}));let K=0;window.addEventListener("touchend",(e=>{e.timeStamp-K<=500&&(e.preventDefault(),e.target.click()),J=!1,K=e.timeStamp}));
//# sourceMappingURL=index.1612d418.js.map
