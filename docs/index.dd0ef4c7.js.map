{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-3d234b162569c2eb.js","node_modules/@parcel/runtime-js/lib/runtime-8e1835d74d5b95be.js","node_modules/@parcel/runtime-js/lib/runtime-bd7cc2acba6ae9eb.js","node_modules/@parcel/runtime-js/lib/runtime-d37ce51439b5300f.js","node_modules/toggle-selection/index.js","node_modules/copy-to-clipboard/index.js","src/state.ts","src/utils.ts","src/render.ts","src/gallery.ts","index.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"6evGa\\\":\\\"index.dd0ef4c7.js\\\",\\\"55edQ\\\":\\\"1.4174c112.png\\\",\\\"99rIB\\\":\\\"2.672c92e3.png\\\",\\\"aLMx8\\\":\\\"4.1e9ab26e.png\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"55edQ\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"99rIB\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"aLMx8\")).toString();","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"⌘\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","var tileSize = 7;\nvar editorRatio = 16;\n\nexport {tileSize, editorRatio};\n","import { tileSize } from './state';\n\nfunction newCell() {\n  let rows = new Array(tileSize).fill(0);\n  return rows.map((v, i) => new Array(tileSize).fill(0));\n}\nfunction newGrid() {\n  let rows = new Array(3).fill(0);\n  return rows.map((v, i) => {\n    let col = new Array(3).fill(0);\n    return col.map((v, i) => newCell());\n  });\n}\n\nfunction rotatePair([x, y]) {\n  let gridSize = 3 * tileSize;\n  return [gridSize - y, x];\n}\nfunction rotationSet([x, y], n = 1) {\n  let gridSize = 3 * tileSize - 1;\n\n  return [\n    [x, y], [gridSize - y, x], [gridSize - x, gridSize - y], [y, gridSize - x]\n  ];\n}\nfunction getLoc(map: any[][][][], loc: number[]): number {\n  let r = loc.reduce((acc, i) => acc[i], map);\n  if (typeof r !== 'number') {\n    return 0;\n  } else {\n    return r;\n  }\n}\n\nfunction setLoc(map: any[][][][], loc: any[], v: number = 1) {\n  let address = loc.slice(0, -1);\n  let lastPos = loc[loc.length - 1];\n\n  address.reduce((acc, i) => acc[i], map)[lastPos] = v;\n}\n\nexport { newGrid, getLoc, setLoc, rotatePair, rotationSet };\n","import copy from \"copy-to-clipboard\";\n\nimport { editorRatio, tileSize } from \"./state\";\nimport { getLoc } from \"./utils\";\n\nlet target = <HTMLElement>document.getElementById(\"target\");\n\n// let vectortarget = <HTMLElement>document.getElementById('vector-target');\n\nlet canvas: HTMLCanvasElement = <HTMLCanvasElement>(\n  document.getElementById(\"editor\")\n);\nlet guideCanvas: HTMLCanvasElement = <HTMLCanvasElement>(\n  document.getElementById(\"guide\")\n);\nlet renderCanvas: HTMLCanvasElement = <HTMLCanvasElement>(\n  document.getElementById(\"render\")\n);\nvar ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\nvar guideCtx = guideCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\nvar renderCtx = renderCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\nrenderCtx.imageSmoothingEnabled = false;\nfunction cleanMap() {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n}\nfunction renderMap(map, pixelRatio) {\n  renderCtx.fill();\n\n  for (let sx = 0; sx < 3; sx++) {\n    for (let sy = 0; sy < 3; sy++) {\n      for (let cx = 0; cx < tileSize; cx++) {\n        for (let cy = 0; cy < tileSize; cy++) {\n          let v = getLoc(map, [sx, sy, cx, cy]);\n\n          ctx.fillStyle = v == 1 ? window.paintColor : \"#fff0\";\n          renderCtx.fillStyle = v == 1 ? window.paintColor : \"#fff0\";\n          let gridX = (sx * tileSize + cx) * pixelRatio;\n          let gridY = (sy * tileSize + cy) * pixelRatio;\n          if (sx == 1 && sy == 1) {\n            continue;\n          }\n          renderCtx.clearRect(gridX, gridY, pixelRatio, pixelRatio);\n          renderCtx.fillRect(gridX, gridY, pixelRatio, pixelRatio);\n          gridX *= editorRatio / pixelRatio;\n          gridY *= editorRatio / pixelRatio;\n          ctx.fillRect(gridX + 1, gridY + 1, editorRatio - 1, editorRatio - 1);\n        }\n      }\n    }\n  }\n  // renderVector(map, pixelRatio)\n}\nfunction drawGuide() {\n  for (let index = 1; index < 3; index++) {\n    guideCtx.strokeStyle = \"#33f\";\n    guideCtx.lineWidth = 0.5;\n    let x = (index * canvas.width) / 3;\n    guideCtx.beginPath();\n    guideCtx.moveTo(x, 0);\n    guideCtx.lineTo(x, canvas.height);\n    guideCtx.stroke();\n    guideCtx.beginPath();\n    guideCtx.moveTo(0, x);\n    guideCtx.lineTo(canvas.height, x);\n    guideCtx.stroke();\n  }\n\n  for (let index = 0.0; index < 3 * tileSize; index++) {\n    guideCtx.strokeStyle = \"#ccc\";\n    let x = (index * canvas.width) / (3 * tileSize);\n    guideCtx.beginPath();\n    guideCtx.moveTo(x, 0);\n    guideCtx.lineTo(x, canvas.height);\n    guideCtx.stroke();\n    guideCtx.beginPath();\n    guideCtx.moveTo(0, x);\n    guideCtx.lineTo(canvas.height, x);\n    guideCtx.stroke();\n  }\n  let third = canvas.width / 3;\n  guideCtx.clearRect(third + 1, third + 1, third - 2, third - 2);\n  guideCtx.beginPath();\n  guideCtx.moveTo(third * 1, third * 2);\n  guideCtx.lineTo(third * 2, third * 1);\n  guideCtx.stroke();\n  guideCtx.beginPath();\n  guideCtx.moveTo(third * 1, third * 1);\n  guideCtx.lineTo(third * 2, third * 2);\n  guideCtx.stroke();\n}\n\nfunction setBorder(pixelRatio) {\n  let dataURI = renderCanvas.toDataURL();\n  // let dataURI2 = renderVector(map, pixelRatio);\n\n  // console.log(dataURI.length);\n  // console.log(dataURI2.length);\n  let style = <HTMLStyleElement>document.getElementById(\"border-style\");\n  if (style) style.remove();\n  style = document.createElement(\"style\");\n  style.id = \"border-style\";\n  document.head.appendChild(style);\n\n  let viewsize = tileSize * pixelRatio;\n  let css = `.broider {\n    border-image:  url(\"${dataURI}\") ${viewsize} /  ${viewsize}px / 0 round;\n    border-width:  ${viewsize}px;\n    border-style:  solid;\n}`;\n  style.sheet.insertRule(css);\n  target.textContent = css;\n}\n// function svgToDataURL(svgStr) {\n//   const encoded =\n//     encodeURIComponent(svgStr).replace(/'/g, '%27').replace(/\"/g, '%22')\n\n//   const header = 'data:image/svg+xml,'\n//   const dataUrl = header + encoded\n//   return dataUrl\n// }\n\n// function renderVector(map, pixelRatio) {\n//   let content = `<svg\n//       width=\"${tileSize * pixelRatio * 3}px\"\n//       height=\"${tileSize * pixelRatio * 3}px\"\n//       viewBox=\"0 0 ${tileSize * pixelRatio * 3} ${tileSize * pixelRatio * 3}\"\n//       fill=\"red\"\n//       stroke=\"none\"\n//       xmlns=\"http://www.w3.org/2000/svg\"\n//       >`;\n//   for (let sx = 0; sx < 3; sx++) {\n//     for (let sy = 0; sy < 3; sy++) {\n//       for (let cx = 0; cx < tileSize; cx++) {\n//         for (let cy = 0; cy < tileSize; cy++) {\n//           let v = getLoc(map, [sx, sy, cx, cy]);\n\n//           let gridX = (sx * tileSize + cx) * pixelRatio;\n//           let gridY = (sy * tileSize + cy) * pixelRatio;\n\n//           if (sx == 1 && sy == 1) {\n//             continue;\n//           }\n\n//           if (v == 1) {\n//             content += `<rect x=\"${gridX}\" y=\"${gridY}\" width=\"${pixelRatio}px\" height=\"${pixelRatio}px\"/>`;\n//           }\n//         }\n//       }\n//     }\n//   }\n//   // console.log(content)\n//   content += '</svg>';\n//   // vectortarget.innerHTML = content;\n//   let dataURI = svgToDataURL(content);\n//   return dataURI\n\n//   // vector.setAttribute(\n//   // 'viewBox',\n//   // `0 0 ${tileSize * pixelRatio * 3} ${tileSize * pixelRatio *\n//   // 3}`);\n//   // vector.innerHTML = content;\n// }\nfunction renderHover(map: any[][][][], loc: number[]) {\n  let x = loc[0] * tileSize + loc[2];\n  let y = loc[1] * tileSize + loc[3];\n  ctx.fillStyle = getLoc(map, loc) == 1 ? \"#dde\" : \"#dde\";\n  if (loc[0] == 1 && loc[1] == 1) {\n    return;\n  }\n  ctx.fillRect(\n    x * editorRatio + 0,\n    y * editorRatio + 0,\n    editorRatio - 0,\n    editorRatio - 0\n  );\n}\n\ntarget.addEventListener(\"click\", copyTarget);\nfunction resetCopy() {\n  target.setAttribute(\"data-after\", \"[Click to copy]\");\n}\n\nresetCopy();\nfunction copyTarget() {\n  copy(target.textContent, { message: \"Press #{key} to copy css\" });\n  target.setAttribute(\"data-after\", \"Copied to your clipboard!\");\n  target.classList.remove(\"flash\");\n\n  window.setTimeout(() => {\n    target.classList.add(\"flash\");\n  }, 1);\n  window.setTimeout(resetCopy, 2500);\n}\n\nfunction galleryLineString(dataURI: string, title: string, pixelRatio: number) {\n  const viewsize = tileSize * pixelRatio;\n  const escapedDataURI = encodeURI(dataURI);\n  const styles = `border-image:  url('${escapedDataURI}') ${viewsize} /  ${viewsize}px / 0 round;\\n    border-width:  ${viewsize}px;\\n    border-style:  solid; `;\n  const escapedTitle = escapeHtml(title);\n  const css = `.${escapedTitle} {\\n    ${styles}\\n  }`;\n\n  const escapedStyles = escapeHtml(styles);\n  const escapedCSS = escapeHtml(css);\n\n  const html = `\n<pre class=\"gallery-line\" data-after=\"[Click to copy]\" style=\"${escapedStyles}\">\n  ${escapedCSS}\n</pre>\n  `;\n  return html;\n}\n\nfunction escapeHtml(unsafe: string): string {\n  return unsafe\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n\nexport {\n  cleanMap,\n  renderMap,\n  drawGuide,\n  setBorder,\n  renderHover,\n  galleryLineString,\n};\n","import copy from \"copy-to-clipboard\";\nimport { galleryLineString } from \"./render\";\n\nfunction to_css_class(string: string): string {\n  // Convert to lowercase\n  string = string.toLowerCase();\n  // Replace spaces with hyphens\n  string = string.replace(/ /g, \"-\");\n  // Remove invalid characters using regex\n  string = string.replace(/[^a-z0-9-_]/g, \"\");\n  // Ensure the first character is a letter or underscore\n  if (string && !/^[a-z_]/.test(string)) {\n    string = \"_\" + string;\n  }\n  return string;\n}\n\nlet title = document.getElementById(\"title\");\nlet submit = document.getElementById(\"submit\");\nlet gallery = document.getElementById(\"gallery\");\nlet renderCanvas: HTMLCanvasElement = <HTMLCanvasElement>(\n  document.getElementById(\"render\")\n);\n\ninterface submission {\n  dataUrl: string;\n  title: string;\n  pixelRatio: number;\n  who: string;\n}\nlet submissions: submission[] = [];\n\nasync function fetchSubmissions() {\n  //fetch posts from:\n  // https://maxbittker-broider.web.val.run/\n  let data = await fetch(\"https://maxbittker-broider.web.val.run/\").then(\n    (res) => res.json()\n  );\n\n  submissions = data.submissions;\n  console.log(submissions);\n  setupGallery();\n}\n\nasync function postSubmission(submission: submission) {\n  //post submission to:\n  // https://maxbittker-broider.web.val.run/\n  let data = await fetch(\"https://maxbittker-broider.web.val.run/\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(submission),\n  }).then((res) => res.json());\n  submissions = data.submissions;\n  setupGallery();\n}\nfetchSubmissions();\n\nsubmit!.addEventListener(\"click\", () => {\n  let dataURI = renderCanvas.toDataURL();\n  let pixelRatio = parseInt(renderCanvas.dataset.pixelRatio);\n  submissions.push({\n    title: to_css_class(title.value),\n    dataUrl: dataURI,\n    pixelRatio: pixelRatio,\n    who: \"\",\n  });\n\n  // window.localStorage.setItem(\"submissions\", JSON.stringify(submissions));\n  postSubmission(submissions[submissions.length - 1]);\n  setupGallery();\n});\n\nfunction setupGallery() {\n  let submissionHTMLs = submissions.map((submission) => {\n    return galleryLineString(\n      submission.dataUrl,\n      submission.title,\n      submission.pixelRatio\n    );\n  });\n  gallery!.innerHTML = submissionHTMLs.join(\"\");\n  document.querySelectorAll(\".gallery-line\").forEach((line) => {\n    line.addEventListener(\"click\", () => {\n      copy(line.textContent);\n      line.setAttribute(\"data-after\", \"Copied to your clipboard!\");\n      line.classList.remove(\"flash\");\n      window.setTimeout(() => {\n        line.classList.add(\"flash\");\n      }, 1);\n      window.setTimeout(() => {\n        line.setAttribute(\"data-after\", \"[Click to copy]\");\n      }, 2500);\n    });\n  });\n}\n\nexport { setupGallery };\n","import onePng from './assets/1.png';\nimport twoPng from './assets/2.png';\nimport fourPng from './assets/4.png';\nimport { cleanMap, drawGuide, renderHover, renderMap, setBorder } from './src/render';\nimport { editorRatio, tileSize } from './src/state';\nimport { getLoc, newGrid, rotationSet, setLoc } from './src/utils';\nimport { setupGallery } from './src/gallery';\nlet penElement = <HTMLElement>document.getElementById('pen');\nlet eraserElement = <HTMLElement>document.getElementById('eraser');\nlet symmetryElement = <HTMLElement>document.getElementById('symmetry');\nlet undoElement = <HTMLImageElement>document.getElementById('undo');\nlet scaleElement = <HTMLImageElement>document.getElementById('scale');\n\nlet colorPicker = <HTMLInputElement>document.getElementById('color');\n\n\nlet frame = <HTMLElement>document.getElementById('editor-frame');\nlet canvas = <HTMLCanvasElement>document.getElementById('editor');\nlet guideCanvas = <HTMLCanvasElement>document.getElementById('guide');\nlet renderCanvas = <HTMLCanvasElement>document.getElementById('render');\ncanvas.width = tileSize * editorRatio * 3;\ncanvas.height = tileSize * editorRatio * 3;\nguideCanvas.width = tileSize * editorRatio * 3;\nguideCanvas.height = tileSize * editorRatio * 3;\n\nlet sizeIndex = 2;\nlet sizeList = [1, 2, 4];\nlet pngList = [onePng, twoPng, fourPng];\nlet pixelRatio = sizeList[sizeIndex];\nrenderCanvas.width = tileSize * pixelRatio * 3;\nrenderCanvas.height = tileSize * pixelRatio * 3;\nrenderCanvas.dataset.pixelRatio = pixelRatio.toString();\n\nscaleElement.addEventListener('click', () => {\n  sizeIndex = (sizeIndex + 1) % sizeList.length;\n  scaleElement.src = pngList[sizeIndex];\n  pixelRatio = sizeList[sizeIndex];\n  renderCanvas.width = tileSize * pixelRatio * 3;\n  renderCanvas.height = tileSize * pixelRatio * 3;\n  renderCanvas.dataset.pixelRatio = pixelRatio.toString();\n  renderMap(map, pixelRatio);\n  setBorder(pixelRatio);\n  updateFrameHeight();\n});\n\nwindow.paintColor = '#000';\ncolorPicker.addEventListener('input', (e) => {\n  window.paintColor = e.target.value;\n  renderMap(map, pixelRatio);\n  setBorder(pixelRatio);\n})\n\n\nfunction updateFrameHeight() {\n  frame.style.height = canvas.getBoundingClientRect().width + 'px';\n}\ndocument.addEventListener('DOMContentLoaded', updateFrameHeight);\nwindow.addEventListener('resize', updateFrameHeight);\n\nvar isDown = false;\nvar isErasing = false;\nvar rotationalSymmetry = true;\n\nsymmetryElement.addEventListener('click', e => {\n  rotationalSymmetry = !rotationalSymmetry;\n  symmetryElement.classList.toggle('selected');\n});\n\neraserElement.addEventListener('click', e => {\n  isErasing = true;\n  eraserElement.classList.add('selected');\n  penElement.classList.remove('selected');\n});\n\npenElement.addEventListener('click', e => {\n  isErasing = false;\n  penElement.classList.add('selected');\n  eraserElement.classList.remove('selected');\n});\n\nvar map = newGrid();\nlet undoStack = [JSON.stringify(map)];\nfunction pushUndo() {\n  let candidate = JSON.stringify(map);\n  let top = undoStack[undoStack.length - 1];\n  if (candidate == top) {\n    return;\n  }\n\n  undoStack.push(candidate);\n\n  if (undoStack.length > 50) {\n    undoStack.shift();\n  }\n  undoElement.classList.add('selected');\n}\nfunction popUndo() {\n  undoStack.pop();\n  let old = undoStack[undoStack.length - 1];\n  if (old) {\n    map = JSON.parse(old);\n    cleanMap();\n    renderMap(map, pixelRatio);\n    setBorder(pixelRatio);\n  }\n}\nundoElement.addEventListener('click', e => {\n  popUndo();\n  if (undoStack.length < 2) {\n    undoElement.classList.remove('selected');\n  }\n  e.preventDefault();\n});\ndrawGuide();\nrenderMap(map, pixelRatio);\nsetBorder(pixelRatio);\n\nfunction draw(loc, v) {\n  if (isDown) {\n    setLoc(map, loc, 1 - v);\n  }\n}\nlet handleEvent = (e, isClick = false, isHover = false) => {\n  let { left, top, width, height } = canvas.getBoundingClientRect();\n  let x = e.clientX - left;\n  let y = e.clientY - top;\n  let canvasX = (x / width) * canvas.width;\n  let canvasY = (y / height) * canvas.height;\n  let gridX = Math.floor(canvasX / editorRatio);\n  let gridY = Math.floor(canvasY / editorRatio);\n\n  let rotatePairs =\n    rotationalSymmetry ? rotationSet([gridX, gridY]) : [[gridX, gridY]];\n\n  cleanMap();\n  // renderMap(map,pixelRatio);\n\n  rotatePairs.forEach(([gridX, gridY]) => {\n    let sx = Math.floor(gridX / tileSize);\n    let sy = Math.floor(gridY / tileSize);\n    let cx = gridX % tileSize;\n    let cy = gridY % tileSize;\n    let loc = [sx, sy, cx, cy];\n\n    if (sx < 0 || sx > 2 || sy < 0 || sy > 2) {\n      return;\n    }\n    if (isHover) {\n      renderHover(map, loc);\n    }\n    let v = getLoc(map, loc);\n\n    if (!isClick) {\n      v = 0;\n    }\n\n    if (isErasing) {\n      v = 1;\n    }\n    draw(loc, v);\n  });\n  renderMap(map, pixelRatio);\n  window.setTimeout(() => setBorder(pixelRatio), 0);\n};\n\ncanvas.addEventListener('mousedown', e => {\n  isDown = true;\n  handleEvent(e, true);\n});\ncanvas.addEventListener('mousemove', e => {\n  handleEvent(e, false, true);\n});\ncanvas.addEventListener('mouseout', e => {\n  cleanMap();\n  renderMap(map, pixelRatio);\n});\nwindow.addEventListener('mousedown', () => {\n  isDown = true;\n});\nwindow.addEventListener('mouseup', () => {\n  isDown = false;\n  pushUndo();\n});\ncanvas.addEventListener('touchend', e => {\n  isDown = false;\n  pushUndo();\n});\ncanvas.addEventListener('touchstart', e => {\n  isDown = true;\n\n  e.preventDefault();\n\n  const touches = e.targetTouches;\n  for (let i = 0; i < touches.length; i++) {\n    e['clientX'] = touches[i].clientX;\n    e['clientY'] = touches[i].clientY;\n    handleEvent(e);\n  }\n});\ncanvas.addEventListener('touchmove', e => {\n  e.preventDefault();\n  isDown = true;\n\n  const touches = e.targetTouches;\n  for (let i = 0; i < touches.length; i++) {\n    e['clientX'] = touches[i].clientX;\n    e['clientY'] = touches[i].clientY;\n    handleEvent(e);\n  }\n});\nlet lastTouchEnd = 0;\nwindow.addEventListener('touchend', e => {\n  // prevent double tap zoom\n  if (e.timeStamp - lastTouchEnd <= 500) {\n    e.preventDefault();\n    e.target.click();\n  }\n  isDown = false;\n  lastTouchEnd = e.timeStamp;\n});\n\nsetupGallery();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$298da1ce81b1d220$exports","URL","resolve","import","meta","url","toString","$18cc30ef1b720cbb$exports","$cb43c2321a81d121$exports","$9e6bd5018912b3a9$exports","selection","document","getSelection","rangeCount","active","activeElement","ranges","push","getRangeAt","tagName","toUpperCase","blur","removeAllRanges","type","forEach","range","addRange","focus","$e5a78797c4262d1f$var$clipboardToIE11Formatting","default","$e5a78797c4262d1f$exports","text","options","debug","message","reselectPrevious","mark","success","createRange","createElement","textContent","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","addEventListener","e","stopPropagation","format","preventDefault","clipboardData","console","warn","window","clearData","setData","onCopy","body","appendChild","selectNodeContents","execCommand","err1","error","err","copyKey","test","navigator","userAgent","replace","$e5a78797c4262d1f$var$format","prompt","removeRange","removeChild","$0b89d474933103bc$export$a104aba81ad9a911","$df5bef30413a053b$export$7b2d291483575ad6","x","y","n","$df5bef30413a053b$export$1e9173ebc1b84b","map","loc","r","reduce","acc","$e3d6ee63ed1479b9$var$target","getElementById","$e3d6ee63ed1479b9$var$canvas","$e3d6ee63ed1479b9$var$guideCanvas","$e3d6ee63ed1479b9$var$renderCanvas","$e3d6ee63ed1479b9$var$ctx","getContext","$e3d6ee63ed1479b9$var$guideCtx","$e3d6ee63ed1479b9$var$renderCtx","$e3d6ee63ed1479b9$export$e62d9f5f4a94939","clearRect","width","height","$e3d6ee63ed1479b9$export$fe4501d50e7230de","pixelRatio","fill","sx","sy","cx","cy","v","fillStyle","paintColor","gridX","gridY","fillRect","$e3d6ee63ed1479b9$export$df6de19f3e6baa52","dataURI","toDataURL","remove","head","viewsize","css","sheet","insertRule","$e3d6ee63ed1479b9$export$2ed6d5ab9f430f6b","$e3d6ee63ed1479b9$var$resetCopy","setAttribute","$e3d6ee63ed1479b9$export$53c8df28cde915b9","title","styles","encodeURI","$e3d6ee63ed1479b9$var$escapeHtml","unsafe","imageSmoothingEnabled","$parcel$interopDefault","classList","setTimeout","add","$d31354e7cd32abad$var$title","$d31354e7cd32abad$var$submit","$d31354e7cd32abad$var$gallery","$d31354e7cd32abad$var$renderCanvas","$d31354e7cd32abad$var$submissions","$d31354e7cd32abad$export$f0c7f3aad087f331","submissionHTMLs","submission","dataUrl","innerHTML","join","querySelectorAll","line","async","data","fetch","then","res","json","submissions","log","$d31354e7cd32abad$var$fetchSubmissions","parseInt","dataset","string","value","toLowerCase","who","method","headers","stringify","$d31354e7cd32abad$var$postSubmission","$543d6d2a56ed7d8d$var$penElement","$543d6d2a56ed7d8d$var$eraserElement","$543d6d2a56ed7d8d$var$symmetryElement","$543d6d2a56ed7d8d$var$undoElement","$543d6d2a56ed7d8d$var$scaleElement","$543d6d2a56ed7d8d$var$colorPicker","$543d6d2a56ed7d8d$var$frame","$543d6d2a56ed7d8d$var$canvas","$543d6d2a56ed7d8d$var$guideCanvas","$543d6d2a56ed7d8d$var$renderCanvas","$543d6d2a56ed7d8d$var$sizeIndex","$543d6d2a56ed7d8d$var$sizeList","$543d6d2a56ed7d8d$var$pngList","$543d6d2a56ed7d8d$var$pixelRatio","$543d6d2a56ed7d8d$var$updateFrameHeight","getBoundingClientRect","src","$543d6d2a56ed7d8d$var$map","target","$543d6d2a56ed7d8d$var$isDown","$543d6d2a56ed7d8d$var$isErasing","$543d6d2a56ed7d8d$var$rotationalSymmetry","toggle","Array","$543d6d2a56ed7d8d$var$undoStack","$543d6d2a56ed7d8d$var$pushUndo","candidate","shift","pop","old","$543d6d2a56ed7d8d$var$popUndo","index","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","index1","x1","third","$543d6d2a56ed7d8d$var$handleEvent","isClick","isHover","left","clientX","clientY","canvasX","canvasY","Math","floor","rotatePairs","address","slice","lastPos","$543d6d2a56ed7d8d$var$draw","touches","targetTouches","$543d6d2a56ed7d8d$var$lastTouchEnd","timeStamp","click"],"version":3,"file":"index.dd0ef4c7.js.map"}